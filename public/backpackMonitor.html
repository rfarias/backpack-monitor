<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Backpack Monitor</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="monitor.css">
</head>
<body>
  <header class="header">
    <img src="https://backpack.exchange/favicon-32x32.png" alt="Backpack logo" class="logo">
    <h1>Backpack Monitor</h1>
  </header>

  <div class="tabs">
    <button id="tab-perp" class="active" onclick="switchTab('perp')">PerpÃ©tuos</button>
    <button id="tab-spot" onclick="switchTab('spot')">Spot</button>
    <button id="tab-transfer" onclick="switchTab('transfer')">DepÃ³sitos / Withdraw</button>
    <!-- ðŸŸ¦ Nova aba -->
    <button id="tab-volume" onclick="switchTab('volume')">Volume Global</button>
  </div>

  <div class="info-box" id="info-box">
    <p>
      <strong>Timeframe:</strong>
      <select id="timeframeSelect" onchange="changeTimeframe(this.value)">
        <option value="3m">3 minutos</option>
        <option value="5m">5 minutos</option>
        <option value="15m">15 minutos</option>
        <option value="30m">30 minutos</option>
        <option value="1h">1 hora</option>
        <option value="4h">4 horas</option>
        <option value="12h">12 horas</option>
        <option value="1d">1 dia</option>
      </select>

    </p>

    <p><strong>Como interpretar:</strong></p>
    <ul>
      <li><strong>ATR%</strong>: mede volatilidade â€”
        <span class="atr-low" style="color:#3cf;">â‰¤0.3%</span>,
        <span class="atr-mid" style="color:#fc3;">0.3â€“0.7%</span>,
        <span class="atr-high" style="color:#f66;">â‰¥0.7%</span>.
      </li>
      <li><strong>RSI</strong>: mede forÃ§a do mercado â€”
        <span style="color:#6f6;">â‰¤30</span> <em>(sobrevendido)</em>,
        <span style="color:#f66;">â‰¥70</span> <em>(sobrecomprado)</em>.
      </li>
      <li><strong>BB Width</strong>: mede amplitude das Bandas de Bollinger â€”
        <span style="color:#3cf;">&lt;0.01</span> <em>(mercado calmo)</em>,
        <span style="color:#fc3;">0.01â€“0.029</span> <em>(mercado moderado)</em>,
        <span style="color:#f66;">â‰¥0.03</span> <em>(mercado volÃ¡til)</em>.
      </li>
      <li><strong>DecisÃ£o:</strong>
        <span style="color:#6f6;">Long</span>,
        <span style="color:#f99;">Short</span>,
        <span style="color:#6cf;">Lateral</span>,
        <span style="color:#ccc;">Neutro</span>.
      </li>
    </ul>
  </div>

  <div class="filters" id="filters">
    <button onclick="setFilter('all')" id="btn-all" class="active">Todos</button>
    <button onclick="setFilter('long')" id="btn-long">SÃ³ Long</button>
    <button onclick="setFilter('short')" id="btn-short">SÃ³ Short</button>
    <button onclick="setFilter('lateral')" id="btn-lateral">SÃ³ Lateral</button>
    <button onclick="setFilter('neutral')" id="btn-neutral">SÃ³ Neutro</button>
    <button onclick="setFilter('new')" id="btn-new" style="display:none;">SÃ³ Novos</button>
    <button onclick="toggleLiquidity()" id="btn-liq">Ocultar sem liquidez</button>
    <button onclick="toggleNeutros()" id="btn-neutro">Ocultar neutros</button>
    <button onclick="manualRefresh()">ðŸ”„ Atualizar agora</button>
    <span id="lastUpdate"></span>
  </div>

  <!-- ðŸ”§ tabela genÃ©rica -->
  <table id="tbl">
    <thead id="tbl-head"></thead>
    <tbody></tbody>
  </table>

  <!-- ðŸŸ¦ container do grÃ¡fico de volume global -->
  <div id="volume-box" style="display:none; height:420px; margin-top:20px;">
    <h2 style="margin:10px 0; color:#a9c2ff;">ðŸ“Š Volume Global da Exchange</h2>

    <!-- ðŸŸ¨ seletor de intervalo -->
    <p style="margin: 0 0 10px 0;">
      <strong>Intervalo:</strong>
      <select id="volumeIntervalSelect" onchange="changeVolumeInterval(this.value)">
        <option value="week">Ãšltimos 7 dias</option>
        <option value="month" selected>Ãšltimos 30 dias</option>
        <option value="all">Todo o histÃ³rico</option>
      </select>
    </p>

    <!-- grÃ¡fico -->
    <canvas id="volumeChart"></canvas>
  </div>

  <!-- ðŸ”§ scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" src="./monitor.js"></script>
</body>
</html>
